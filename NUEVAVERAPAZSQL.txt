
alter session set "_ORACLE_SCRIPT" = true;

-- USER SQL

ALTER USER "NUEVAVERAPAZDB"
DEFAULT TABLESPACE "USERS"
TEMPORARY TABLESPACE "TEMP"
ACCOUNT UNLOCK ;

-- QUOTAS

ALTER USER "NUEVAVERAPAZDB" QUOTA UNLIMITED ON "SYSTEM";
ALTER USER "NUEVAVERAPAZDB" QUOTA UNLIMITED ON "USERS";

-- ROLES

ALTER USER "NUEVAVERAPAZDB" DEFAULT ROLE "DBA","RESOURCE";

-- SYSTEM PRIVILEGES


  CREATE TABLE "NUEVAVERAPAZDB"."BITACORACHEQUE" 
   (	"IDBITﾃ，ORA" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"FECHA" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"IDCLLIENTEFK" NUMBER(*,0) NOT NULL ENABLE, 
	"IDCHEQUEFK" NUMBER(*,0) NOT NULL ENABLE, 
	 CONSTRAINT "BITACORACHEQUE_PK" PRIMARY KEY ("IDBITﾃ，ORA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FKCHEQUECLIENTE" FOREIGN KEY ("IDCLLIENTEFK")
	  REFERENCES "NUEVAVERAPAZDB"."USUARIO" ("IDUSUARIO") ENABLE, 
	 CONSTRAINT "FKCHEQUECHEQUE" FOREIGN KEY ("IDCHEQUEFK")
	  REFERENCES "NUEVAVERAPAZDB"."CHEQUE" ("IDCHEQUE") ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "NUEVAVERAPAZDB"."DISPARADORBITACORA" 
   before insert on "NUEVAVERAPAZDB"."BITACORACHEQUE" 
   for each row 
begin  
   if inserting then 
      if :NEW."IDBITﾃ，ORA" is null then 
         select SECUENCIABITACORA.nextval into :NEW."IDBITﾃ，ORA" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "NUEVAVERAPAZDB"."DISPARADORBITACORA" ENABLE;



-------
CREATE TABLE "NUEVAVERAPAZDB"."CHEQUE" 
   (	"IDCHEQUE" NUMBER(*,0) NOT NULL ENABLE, 
	"FECHAEMISION" DATE NOT NULL ENABLE, 
	"MONTO" FLOAT(126) NOT NULL ENABLE, 
	"IDCHEQUERAFK" NUMBER(*,0) NOT NULL ENABLE, 
	 CONSTRAINT "CHEQUE_PK" PRIMARY KEY ("IDCHEQUE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FKCHEQUECHEQUERA" FOREIGN KEY ("IDCHEQUERAFK")
	  REFERENCES "NUEVAVERAPAZDB"."CHEQUERA" ("IDCHEQUERA") ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "NUEVAVERAPAZDB"."DISPARADORCHEQUE" 
   before insert on "NUEVAVERAPAZDB"."CHEQUE" 
   for each row 
begin  
   if inserting then 
      if :NEW."IDCHEQUE" is null then 
         select SECUENCIACHEQUES.nextval into :NEW."IDCHEQUE" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "NUEVAVERAPAZDB"."DISPARADORCHEQUE" ENABLE;
------


CREATE TABLE "NUEVAVERAPAZDB"."CHEQUERA" 
   (	"IDCHEQUERA" NUMBER(*,0) NOT NULL ENABLE, 
	"FECHAEMISION" DATE NOT NULL ENABLE, 
	"CHEQUESORIGINALES" NUMBER(*,0) NOT NULL ENABLE, 
	"CHEQUESACTUALES" NUMBER(*,0) NOT NULL ENABLE, 
	"IDCUENTAFK" NUMBER(*,0) NOT NULL ENABLE, 
	 CONSTRAINT "CHEQUERA_PK" PRIMARY KEY ("IDCHEQUERA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FKCHEQUERACUENTA" FOREIGN KEY ("IDCUENTAFK")
	  REFERENCES "NUEVAVERAPAZDB"."CUENTABANCO" ("IDCUENTA") ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "NUEVAVERAPAZDB"."DISPARADORCHEQUERA" 
   before insert on "NUEVAVERAPAZDB"."CHEQUERA" 
   for each row 
begin  
   if inserting then 
      if :NEW."IDCHEQUERA" is null then 
         select SECUENCIACHEQUERA.nextval into :NEW."IDCHEQUERA" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "NUEVAVERAPAZDB"."DISPARADORCHEQUERA" ENABLE;

-------

CREATE TABLE "NUEVAVERAPAZDB"."CUENTABANCO" 
   (	"IDCUENTA" NUMBER(*,0) NOT NULL ENABLE, 
	"NOMBREBANCO" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"EMISION" DATE NOT NULL ENABLE, 
	"MONTOORIGEN" FLOAT(126) NOT NULL ENABLE, 
	"MONTOACTUAL" FLOAT(126) NOT NULL ENABLE, 
	 CONSTRAINT "CUENTABANCO_PK" PRIMARY KEY ("IDCUENTA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "NUEVAVERAPAZDB"."DISPARADORCUENTA" 
   before insert on "NUEVAVERAPAZDB"."CUENTABANCO" 
   for each row 
begin  
   if inserting then 
      if :NEW."IDCUENTA" is null then 
         select SECUENCIASCUENTAS.nextval into :NEW."IDCUENTA" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "NUEVAVERAPAZDB"."DISPARADORCUENTA" ENABLE;

-------
 CREATE TABLE "NUEVAVERAPAZDB"."USUARIO" 
   (	"IDUSUARIO" NUMBER(*,0) NOT NULL ENABLE, 
	"NOMBRE" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"APELLIDO" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"DIRECCION" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"ROLSISTEMA" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"MONTOAPROBADO" NUMBER(*,0) NOT NULL ENABLE, 
	"USUARIO" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"PSSWRD" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	 CONSTRAINT "USUARIO_PK" PRIMARY KEY ("IDUSUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "NUEVAVERAPAZDB"."DISPARADORUSUARIO" 
   before insert on "NUEVAVERAPAZDB"."USUARIO" 
   for each row 
begin  
   if inserting then 
      if :NEW."IDUSUARIO" is null then 
         select SECUENCIAUSUARIO.nextval into :NEW."IDUSUARIO" from dual; 
      end if; 
   end if; 
end;

/
ALTER TRIGGER "NUEVAVERAPAZDB"."DISPARADORUSUARIO" ENABLE;



--

METODOS DE AGREGAR A USUARIO. X MEDIO DE PROCEDURES.


SELECT * FROM USUARIO


METODOS DE AGREGAR A CHEQUE.








